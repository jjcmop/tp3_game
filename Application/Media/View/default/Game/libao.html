<extend name="Public/base"/>
<block name="body" >
    <link rel="stylesheet" href="__CSS__/libao.css">   
    <style>
        #pagation{text-align:center;padding:40px 30px;width:800px;}       
        #pagation .aBtns{
            float:left;
            padding-left:115px;
        }
        #pagation .aBtns a{
            text-decoration: none;
            font-size:14px;color:#999;
            display: inline-block;padding:5px 10px;
            background:#fff;margin:0 5px;float:left;
            cursor: pointer;
        }
        #pagation .aBtns a.active{
            color:#fff;
            background:#ed6557;
        }
        #pagation .jump{
            float:right; font-size:14px;color:#999;
            line-height:20px;
            padding-right:110px;
        }
        #pagation .jump input{
            width:40px;height:20px;border:1px solid #ccc;
            font-size:14px;margin:3px 3px 0 10px;
        }
        #pagation .jump span{
            display: inline-block;
            font-size:14px;padding:5px 10px;
        }

    </style>
    <!--推荐礼包-->
    <div class="youxilb clearfix">
    <div class="container">
        <div class="youxi-t">
            <a href="javascript:;" class="one"><span class="icon-youxi"></span>推荐礼包</a>
        </div>
        <div class="youxi-b">
            <ul>
                <volist name="recommend_gift" id="vo">
                <li>
                    <a href="{:U('Game/yxchildren?id='.$vo['id'].'')}" class="one">
                        <img src="__ROOT__{$vo.cover|get_cover='path'}">
                    </a>
                    <div class="show">
                        <p class="first" id="{$vo.gift_id}">{$vo.giftbag_name}</p>
                        <p >{$vo.game_name}</p>
                        <p class="two">{$vo.desribe}</p>
                        <a href="javascript:;" class="goandget">领&nbsp;取</a>
                    </div>
                </li>
                </volist>
            </ul>
        </div>
    </div>
</div>
    <!--最新礼包-->
    <div class="new container clearfix">
        <div class="new-t">
            <a href="javascript:;" class="one"><span class="icon-libao"></span>最新礼包</a>
        </div>
        <div class="new-b">
            <ul>
                <volist name="gift" id="vo" >
                    <li>
                        <a href="__CONTROLLER__/yxchildren/id/{$vo['game_id']}/type/1.html" class="giftmore">
                           <img src="__ROOT__{$vo.icon|get_cover='path'}">   </a>
                            <div class="wenzi">
                                <a href="__CONTROLLER__/yxchildren/id/{$vo['game_id']}/type/2.html"><p class="first" id="{$vo.gift_id}">{$vo.giftbag_name}-{$vo.game_name}</p></a><br>
                                <!--<p class="next">{$vo.desribe}</p>-->
                                <p class="next">{:msubstr($vo['desribe'],0,20,'UTF-8',false)}</p>
                            </div>
                            <div class="load"> 领 &nbsp;取</div>

                    </li>
                </volist>
            </ul>
        </div>
    </div>
    <!--图片墙-->
    <div class="pic container">
        <ul>
            <li><a href="javascript:;"><img src="__IMG__/libao/main/guanggao1.png" alt=""></a></li>
            <li><a href="javascript:;"><img src="__IMG__/libao/main/guanggao2.png" alt=""></a></li>
            <li><a href="javascript:;"><img src="__IMG__/libao/main/guanggao1.png" alt=""></a></li>
            <li><a href="javascript:;"><img src="__IMG__/libao/main/guanggao2.png" alt=""></a></li>
        </ul>
    </div>
    <!--中间部分-->
    <div class="game container clearfix">
    <div class="game-l">
        <!--全部礼包-->
        <div class="category">
            <div class="category-t">
                <a href="javascript:;"><span class="icon_fenlei"></span>全部礼包</a>
            </div>
            <div class="category-b" id="box1">
                <div class="category-b-t">
                    <a href="#">游戏题材</a>
                </div>
                <div class="hd">
                <span style="margin-right: 15px" class="current" id="0">
                      不 &nbsp;限
                </span>
                    <volist name=':get_game_type_all()' id='vo' key='k'>
                    <span id="{$vo['id']}" style="margin-right: 15px">
                        {$vo.type_name}
                    </span>
                    </volist>
                </div>
                <div class="bd">
                    <ul>
                        <li class="show">
                            <volist name='data' id='v'>
                            <div class="one_category">
                                <a href="{:U('Game/yxchildren?id='.$v['id'].'')}" class="pic">
                                <img src="__ROOT__{$v.icon|get_cover='path'}" alt="">
                                </a>
                                <div class="right">
                                    <a href="__CONTROLLER__/yxchildren/id/{$v['id']}/type/2.html" class="title" id="{$v.id}">{:msubstr($v['giftbag_name'],0,4,'UTF-8',false)}</a>
                                    <p class="next">{$v.game_name}</p>
                                    <a class="lq" href="javascript:;">领&nbsp;取</a>
                                </div>
                            </div>
                            </volist>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--分页器-->
        <div id="pagation" class="clearfix" >  </div>
    </div>
    <div class="game-r">
        <!--游戏排行-->
        <div class=" paihang clearfix">
            <div class="paihang-t">
                <a href="javascript:;"  class="one"><span class="icon-libao"></span>游戏排行</a>
            </div>
            <div class="paihang-b clearfix">
                <ul class="weekly-list clearfix">
                  <volist name="rank" id="vo" >
                           <li >
                               <div class="app-show-title">
                                   <if condition="$num lt 5"><span class="num s-index-org" style="display:inline-block;width: 20px;height: 20px;background-color:#f19ec2;color: #ffffff;text-align: center;line-height: 20px;margin-right: 20px">{$num++}</span>
                                       <elseif condition="$num lt 7" /><span class="num s-index-org" style="display:inline-block;width: 20px;height: 20px;background-color:pink;color: #ffffff;text-align: center;line-height: 20px;margin-right: 20px">{$num++}</span>
                                       <else /> <span class="num s-index-org" style="display:inline-block;width: 20px;height: 20px;background-color:gray;color: #ffffff;text-align: center;line-height: 20px;margin-right: 20px">{$num++}</span>
                                   </if>


                                   <a href="{:U('Game/yxchildren?id='.$vo['id'].'')}" class="bl">{$vo.game_name}</a>
                                   <a href="javascript:;" class="hh">{$vo.game_type_name}</a>
                               </div>
                               <div class="app-show-block">
                                   <a href="{:U('Game/yxchildren?id='.$vo['id'].'')}" class="pic"><img src="__ROOT__{$vo.icon|get_cover='path'}" alt="{$vo.game_name}"></a>
                                   <!--<a  class="xz" href="javascript:;">下&nbsp;载</a>-->
                                   <a  class="xz" href="<if condition='$vo.dow_status eq 0'>#<else/>{:U('Down/down_file?game_id='.$vo['id'].'&type=1')}</if>" class="down">下&nbsp;载</a>
                                   <a  class="lb" href="__CONTROLLER__/yxchildren/id/{$vo['id']}/type/2">礼&nbsp;包</a>
                               </div>
                           </li>
                       </volist>

                </ul>
            </div>
        </div>
    </div>
</div>
<!--尾巴部分-->
</body>
<script src="__JS__/jquery.min.js"></script>
<script src="__JS__/libao.js"></script>
<script src="__JS__/js.js"></script>
<script src="__JS__/pop.js"></script>
<script src="__JS__/pagation.js"></script>
<script type="text/javascript" src="__JS__/query.js"></script>
<script>
    var num = {$Think.get.type|default=0};
    var spans=document.getElementById("box1").getElementsByTagName('span');
           
            
        for(var i=0;i<spans.length;i++){
                for(var j=0;j<spans.length;j++){                 
                    spans[j].className = "";
                }
        
        }
        $('#'+num).addClass('current');    

</script>
<script>
    var spans=document.querySelector('.hd');
    var options=spans.getElementsByTagName('span');   
    var dataLength={$count|default=0};
    var pageSize=12;
    var allPageNum=dataLength%pageSize==0 ? parseInt(dataLength/pageSize):(parseInt(dataLength/pageSize)+1);
    var p ={$Think.get.p|default=1};
     type = {$Think.get.type|default=0};
    if(dataLength>pageSize){
        page({
            id : 'pagation',
            nowNum : p,
            allNum : allPageNum,
            callBack : function(now,all){
                 window.location.href="http://{$Think.server.http_host}__CONTROLLER__/index/type/"+type+"/p/"+now+"/pagesize/"+pageSize+'.html';
            }
        });
    }else{
        $("#pagation").css("display","none");
    }
    // tab 点击切换页面
    for(var i=0;i<options.length;i++){
        options[i].index=i;
        options[i].onclick=function () {
            var type= options[this.index].getAttribute('id');      
              window.location.href="http://{$Think.server.http_host}__CONTROLLER__/index/type/"+type+"/p/"+p+"/pagesize/"+pageSize+'.html';          
        };
    }
</script>
<script>

    $('.new-b').find('li').each(function () {
    $(this).find('.load').click(function () {
        $.ajax({
            type:'post',
            dataType:'json',
            data:{
                gift:$(this).parent("li").find('.first').html(),
                giftid:$(this).parent("li").find('.first').attr('id')
            },
            url:"{:U('Member/getGameGift')}",
            success:function(data) {
                if (parseInt(data.status) == 1 ) {
//                    登录成功时候的状态
                    if(data.msg=='ok'){
                        login_ok(data);
                    }
                    if(data.msg=='no'){
//                        您已领取过该礼包
                        login_no(data)
                    }
                    if(data.msg=='noc'){
//                        该礼包已领取完，下次请早
                        login_noc(data)
                    }
                }
                if (parseInt(data.status) == 0 ) {
                    //登录失败的时候
                    nologin_box();
                }
            },
            error:function() {
                alert('服务器故障，请稍候再试。。。。');
            }
        });
    })
})


    $('.one_category').find('.right').each(function () {
    $(this).find('.lq').click(function () {
        $.ajax({
            type:'post',
            dataType:'json',
            data:{
                gift: $(this).parent(".right").find('.title').html(),
                giftid:$(this).parent(".right").find('.title').attr('id')
            },
            url:"{:U('Member/getGameGift')}",
            success:function(data) {
                if (parseInt(data.status) == 1 ) {
//                    登录成功时候的状态
                    if(data.msg=='ok'){
                        login_ok(data);
                    }
                    if(data.msg=='no'){
//                        您已领取过该礼包
                        login_no(data)
                    }
                    if(data.msg=='noc'){
//                        该礼包已领取完，下次请早
                        login_noc(data)
                    }
                }
                if (parseInt(data.status) == 0 ) {
                    //登录失败的时候
                    nologin_box();
                }
            },
            error:function() {
                alert('服务器故障，请稍候再试。。。。');
            }
        });
    })
});
$('.youxi-b').find('.show').each(function (){
    $(this).find('.goandget').click(function (){
        $.ajax({
            type:'post',
            dataType:'json',
            data:{
                gift: $(this).parent(".show").find('.first').html(),
                giftid:$(this).parent(".show").find('.first').attr('id')
            },
            url:"{:U('Member/getGameGift')}",
            success:function(data) {
                if (parseInt(data.status) == 1 ) {
//                    登录成功时候的状态
                    if(data.msg=='ok'){
                        login_ok(data);
                    }
                    if(data.msg=='no'){
//                        您已领取过该礼包
                        login_no(data)
                    }
                    if(data.msg=='noc'){
//                        该礼包已领取完，下次请早
                        login_noc(data)
                    }
                }
                if (parseInt(data.status) == 0 ) {
                    //登录失败的时候
                    nologin_box();
                }
            },
            error:function() {
                alert('服务器故障，请稍候再试。。。。');
            }
        });
    })
});


</script>
</html>
</block>